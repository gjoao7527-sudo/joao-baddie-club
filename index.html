<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Treino BJ</title>
<link rel="manifest" href="manifest.json">

<style>
:root{
  --bg:#fff;
  --card:#f2f2f7;
  --text:#000;
  --accent:#000;
}

@media (prefers-color-scheme: dark){
  :root{
    --bg:#000;
    --card:#111;
    --text:#fff;
    --accent:#fff;
  }
}

body{
  margin:0;
  font-family:-apple-system,BlinkMacSystemFont,"SF Pro Display",sans-serif;
  background:var(--bg);
  color:var(--text);
  padding:20px;
}

.hidden{display:none;}

.card{
  background:var(--card);
  border-radius:28px;
  padding:20px;
  margin-bottom:25px;
  box-shadow:0 15px 40px rgba(0,0,0,0.1);
}

button{
  background:var(--accent);
  color:var(--bg);
  border:none;
  padding:10px 18px;
  border-radius:20px;
  cursor:pointer;
  margin:5px 0;
}

.day{
  padding:14px;
  border-radius:18px;
  margin-bottom:12px;
  cursor:pointer;
  background:rgba(0,0,0,0.05);
  transition:0.3s;
}

.day.completed{
  background:rgba(0,0,0,0.25);
}

.exercise{
  display:flex;
  justify-content:space-between;
  padding:12px 0;
  border-bottom:1px solid rgba(0,0,0,0.08);
}

.done{
  text-decoration:line-through;
  opacity:0.4;
}

.progress-bar{
  height:8px;
  background:rgba(0,0,0,0.1);
  border-radius:10px;
  margin:15px 0;
}

.progress-fill{
  height:100%;
  width:0%;
  background:var(--accent);
  border-radius:10px;
  transition:0.4s;
}

.badge{
  font-size:14px;
  padding:6px 12px;
  border-radius:15px;
  background:gold;
  color:#000;
  display:inline-block;
  margin-top:10px;
}
</style>
</head>

<body>

<div id="loginScreen" class="card">
<h2>Entrar</h2>
<button onclick="login('Joao')">Jo√£o</button>
<button onclick="login('Beatriz')">Beatriz</button>
</div>

<div id="app" class="hidden">

<h2 id="welcome"></h2>

<div class="card">
<h3>Estat√≠sticas</h3>
<p id="stats"></p>
<p id="streak"></p>
<div id="badgeArea"></div>

<h4>Meta Personalizada</h4>
<input type="number" id="metaInput" placeholder="Treinos por semana">
<button onclick="salvarMeta()">Salvar Meta</button>
<p id="metaStatus"></p>

<h4>Hist√≥rico</h4>
<div id="historicoLista"></div>
</div>

<div class="card">
<h3>Treinos</h3>

<div class="day" data-dia="segunda" onclick="abrirTreino('segunda')">üçë Segunda ‚Äì Gl√∫teo</div>
<div class="day" data-dia="terca" onclick="abrirTreino('terca')">üí™ Ter√ßa ‚Äì Costas + B√≠ceps</div>
<div class="day" data-dia="quarta" onclick="abrirTreino('quarta')">üçë Quarta ‚Äì Posterior + Gl√∫teo</div>
<div class="day" data-dia="quinta" onclick="abrirTreino('quinta')">üßç Quinta ‚Äì Ombro + Postura</div>
<div class="day" data-dia="sexta" onclick="abrirTreino('sexta')">üçë Sexta ‚Äì Quadr√≠ceps + Gl√∫teo</div>
<div class="day" data-dia="sabado" onclick="abrirTreino('sabado')">üî• S√°bado ‚Äì Superior + Abd√¥men</div>
<div class="day" data-dia="domingo" onclick="abrirTreino('domingo')">üèÉ Domingo ‚Äì Cardio</div>

<div id="treinoBox"></div>

</div>

</div>

<script>

let usuario = localStorage.getItem("usuario");
let progresso = {};
let historico = {};
let metaPersonalizada = 5;

if(usuario) iniciarApp();

function login(nome){
usuario = nome;
localStorage.setItem("usuario",nome);
iniciarApp();
}

function iniciarApp(){
document.getElementById("loginScreen").classList.add("hidden");
document.getElementById("app").classList.remove("hidden");
document.getElementById("welcome").innerText="Ol√°, "+usuario;

progresso = JSON.parse(localStorage.getItem(usuario+"_progresso")) || {};
historico = JSON.parse(localStorage.getItem(usuario+"_historico")) || {};
metaPersonalizada = localStorage.getItem(usuario+"_meta") || 5;

atualizarStats();
marcarDiasConcluidos();
}

function abrirTreino(dia){

const treinos={

segunda:{rep:"4x 8‚Äì12",ex:["Eleva√ß√£o p√©lvica","Eleva√ß√£o p√©lvica unilateral","Cadeira abdutora","Gl√∫teo no cabo","Afundo no smith"],cardio:"15‚Äì20 min caminhada normal na esteira"},

terca:{rep:"3‚Äì4x 10‚Äì12",ex:["Puxada frontal","Remada baixa","Remada unilateral","Rosca direta","Rosca alternada","Rosca martelo"],cardio:"15 min HIIT (30s corrida + 1min andando)"},

quarta:{rep:"4x 8‚Äì12",ex:["Stiff","Mesa flexora","Passada","Gl√∫teo 4 apoios","Eleva√ß√£o p√©lvica","Cadeira abdutora"],cardio:"15‚Äì20 min caminhada moderada"},

quinta:{rep:"3x 12‚Äì15",ex:["Eleva√ß√£o lateral","Desenvolvimento com halteres","Eleva√ß√£o frontal","Face pull","Crucifixo inverso","Remada alta"],cardio:"15 min corrida leve"},

sexta:{rep:"4x 8‚Äì12",ex:["Agachamento","Leg press","Cadeira extensora","Afundo b√∫lgaro","Agachamento sum√¥","Cadeira abdutora"],cardio:"15‚Äì20 min caminhada moderada"},

sabado:{rep:"3x 10‚Äì12",ex:["Puxada frontal","Remada baixa","Eleva√ß√£o lateral","Rosca direta","Tr√≠ceps corda","Desenvolvimento com halteres","Prancha 3x 30‚Äì60s","Abdominal infra 3x 15"],cardio:"10‚Äì15 min leve"},

domingo:{rep:"",ex:["30‚Äì40 min caminhada OU 20 min caminhada + 10 min corrida leve"],cardio:""}

};

let box=document.getElementById("treinoBox");
box.innerHTML="<h4>"+treinos[dia].rep+"</h4>";
box.innerHTML+='<div class="progress-bar"><div id="progressFill" class="progress-fill"></div></div>';

let total=treinos[dia].ex.length+1;

treinos[dia].ex.forEach((e,i)=>{
let id=dia+"-"+i;
let checked=progresso[id]?"checked":"";
let done=progresso[id]?"done":"";

box.innerHTML+=`
<div class="exercise ${done}">
<span>${e}</span>
<input type="checkbox" ${checked} onchange="marcar('${id}','${dia}',${total})">
</div>`;
});

let cardioId=dia+"-cardio";
let cardioChecked=progresso[cardioId]?"checked":"";
let cardioDone=progresso[cardioId]?"done":"";

box.innerHTML+=`
<div class="exercise ${cardioDone}">
<span><strong>Cardio:</strong> ${treinos[dia].cardio}</span>
<input type="checkbox" ${cardioChecked} onchange="marcar('${cardioId}','${dia}',${total})">
</div>`;

atualizarBarra(dia,total);
}

function marcar(id,dia,total){
if(progresso[id]) delete progresso[id];
else progresso[id]=true;

localStorage.setItem(usuario+"_progresso",JSON.stringify(progresso));
atualizarBarra(dia,total);
}

function atualizarBarra(dia,total){
let feitos=Object.keys(progresso).filter(k=>k.startsWith(dia)).length;
let porcentagem=(feitos/total)*100;
document.getElementById("progressFill").style.width=porcentagem+"%";

if(feitos>=total){
let hoje=new Date().toLocaleDateString();
historico[hoje]=dia;
localStorage.setItem(usuario+"_historico",JSON.stringify(historico));
atualizarStats();
marcarDiasConcluidos();
}
}

function atualizarStats(){
let diasTreinados=Object.keys(historico).length;
document.getElementById("stats").innerText="Treinos conclu√≠dos: "+diasTreinados;

let streak=calcularStreak();
document.getElementById("streak").innerText="Streak: "+streak+" dias";

let badge="";
if(streak>=5) badge+='<div class="badge">üî• 5+ dias seguidos</div>';
if(diasTreinados>=metaPersonalizada) badge+='<div class="badge">üèÜ Meta semanal conclu√≠da</div>';

document.getElementById("badgeArea").innerHTML=badge;

atualizarHistoricoVisual();
verificarMeta();
}

function atualizarHistoricoVisual(){
let lista=document.getElementById("historicoLista");
lista.innerHTML="";
Object.keys(historico).forEach(data=>{
lista.innerHTML+="<div>"+data+" ‚úîÔ∏è</div>";
});
}

function calcularStreak(){
let datas=Object.keys(historico).sort((a,b)=>new Date(b)-new Date(a));
let streak=0;
let hoje=new Date();

for(let i=0;i<datas.length;i++){
let data=new Date(datas[i]);
let diff=Math.floor((hoje-data)/(1000*60*60*24));
if(diff===i) streak++;
else break;
}
return streak;
}

function salvarMeta(){
metaPersonalizada=document.getElementById("metaInput").value;
localStorage.setItem(usuario+"_meta",metaPersonalizada);
verificarMeta();
}

function verificarMeta(){
let dias=Object.keys(historico).length;
document.getElementById("metaStatus").innerText="Progresso: "+dias+"/"+metaPersonalizada;
}

function marcarDiasConcluidos(){
document.querySelectorAll(".day").forEach(el=>{
let dia=el.getAttribute("data-dia");
if(Object.values(historico).includes(dia)){
el.classList.add("completed");
}
});
}

</script>

</body>
</html>
